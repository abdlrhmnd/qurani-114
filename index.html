<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÙˆØ°ÙƒØ± ÙØ¥Ù† Ø§Ù„Ø°ÙƒØ±Ù‰ ØªÙ†ÙØ¹ Ø§Ù„Ù…Ø¤Ù…Ù†ÙŠÙ†</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Reem+Kufi:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --dark-brown: #3e2723;
            --main-brown: #5d4037;
            --accent-gold: #c6a664;
            --bg-paper: #f4eee0;
            --text-color: #2b1d1a;
        }
        body { 
            font-family: 'Amiri', serif; 
            background-color: var(--bg-paper);
            color: var(--text-color);
            margin: 0; padding: 10px;
            background-image: url('https://www.transparenttextures.com/patterns/natural-paper.png');
            overflow-x: hidden;
        }
        .container { 
            width: 100%; max-width: 750px; margin: 10px auto; 
            background: rgba(255, 255, 255, 0.95); 
            padding: 20px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(62, 39, 35, 0.1);
            border: 1px solid var(--accent-gold);
            text-align: center;
            box-sizing: border-box;
        }
        .quran-quote {
            font-family: 'Amiri', serif;
            font-size: 1.6em; color: var(--main-brown);
            margin: 15px 0; font-weight: bold; line-height: 1.5;
            text-shadow: 1px 1px 2px rgba(198, 166, 100, 0.2);
        }
        h1 { font-family: 'Reem Kufi', sans-serif; color: var(--dark-brown); font-size: 1.5em; margin: 0; }
        .achievement-box {
            background: var(--main-brown); color: white;
            padding: 15px; border-radius: 15px; margin: 20px 0;
            cursor: pointer; transition: 0.3s;
            border-bottom: 4px solid var(--dark-brown);
        }
        .surah-card { 
            border: 1px solid #dcd3bd; margin-bottom: 12px; 
            border-radius: 15px; overflow: hidden; background: white;
            text-align: right;
        }
        .surah-header { 
            padding: 15px; cursor: pointer; display: flex; 
            justify-content: space-between; align-items: center;
        }
        .surah-name { font-weight: bold; color: var(--main-brown); font-size: 1.2em; }
        .btn-group { padding: 0 15px 15px; display: flex; gap: 8px; flex-wrap: wrap; }
        .read-btn {
            flex: 1; min-width: 120px;
            background: var(--accent-gold); color: white; border: none;
            padding: 12px 10px; border-radius: 8px; cursor: pointer; 
            font-family: 'Reem Kufi', sans-serif; font-size: 0.85em;
        }
        .quran-text-area {
            display: none; background: #fffcf5; padding: 20px;
            margin: 10px; border: 1px solid var(--accent-gold);
            font-size: 1.4em; line-height: 2.2; text-align: center; 
            border-radius: 12px;
        }
        .bismillah-frame {
            font-family: 'Amiri', serif;
            border: 2px double var(--accent-gold); 
            display: inline-block; padding: 5px 20px; 
            margin-bottom: 15px; border-radius: 15px; 
            font-weight: bold; color: var(--dark-brown);
            font-size: 1.1em;
        }
        .tasks-list { display: none; padding: 10px; border-top: 1px solid #eee; background: #fdfbf7; }
        .task-item { 
            display: flex; align-items: center; gap: 10px; 
            padding: 10px; border-bottom: 1px solid #f1ede4;
        }
        input[type="checkbox"] { width: 20px; height: 20px; flex-shrink: 0; }
        label { font-size: 1em; cursor: pointer; line-height: 1.2; }
        @media (max-width: 400px) {
            .quran-quote { font-size: 1.3em; }
            h1 { font-size: 1.2em; }
            .btn-group { flex-direction: column; }
            .read-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ù…ÙØ³Ø§Ø¹Ø¯ Ø®ÙØªÙ… Ø§Ù„Ù‚ÙØ±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>
        <div class="quran-quote">ï´¿ ÙˆÙÙ„ÙÙ‚ÙØ¯Ù’ ÙŠÙØ³Ù‘ÙØ±Ù’Ù†ÙØ§ Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù Ù„ÙÙ„Ø°Ù‘ÙÙƒÙ’Ø±Ù ÙÙÙ‡ÙÙ„Ù’ Ù…ÙÙ† Ù…Ù‘ÙØ¯Ù‘ÙÙƒÙØ±Ù ï´¾</div>
        <div class="achievement-box" onclick="toggleFilter()" id="stat-box">
            <h3 id="stat-title" style="margin:0; font-size: 1.1em;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ...</h3>
            <p id="stat-sub" style="margin:5px 0 0; font-size: 0.85em; opacity: 0.9;">Ø§Ø¶ØºØ· Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ù…Ù†Ø¬Ø² ÙÙ‚Ø·</p>
        </div>
        <div id="quran-list"></div>
    </div>
    <script>
        const surahs = [{n:"Ø§Ù„ÙØ§ØªØ­Ø©", a:7}, {n:"Ø§Ù„Ø¨Ù‚Ø±Ø©", a:286}, {n:"Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", a:200}, {n:"Ø§Ù„Ù†Ø³Ø§Ø¡", a:176}, {n:"Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", a:120}, {n:"Ø§Ù„Ø£Ù†Ø¹Ø§Ù…", a:165}, {n:"Ø§Ù„Ø£Ø¹Ø±Ø§Ù", a:206}, {n:"Ø§Ù„Ø£Ù†ÙØ§Ù„", a:75}, {n:"Ø§Ù„ØªÙˆØ¨Ø©", a:129}, {n:"ÙŠÙˆÙ†Ø³", a:109}, {n:"Ù‡ÙˆØ¯", a:123}, {n:"ÙŠÙˆØ³Ù", a:111}, {n:"Ø§Ù„Ø±Ø¹Ø¯", a:43}, {n:"Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", a:52}, {n:"Ø§Ù„Ø­Ø¬Ø±", a:99}, {n:"Ø§Ù„Ù†Ø­Ù„", a:128}, {n:"Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡", a:111}, {n:"Ø§Ù„ÙƒÙ‡Ù", a:110}, {n:"Ù…Ø±ÙŠÙ…", a:98}, {n:"Ø·Ù‡", a:135}, {n:"Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡", a:112}, {n:"Ø§Ù„Ø­Ø¬", a:78}, {n:"Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†", a:118}, {n:"Ø§Ù„Ù†ÙˆØ±", a:64}, {n:"Ø§Ù„ÙØ±Ù‚Ø§Ù†", a:77}, {n:"Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡", a:227}, {n:"Ø§Ù„Ù†Ù…Ù„", a:93}, {n:"Ø§Ù„Ù‚ØµØµ", a:88}, {n:"Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", a:69}, {n:"Ø§Ù„Ø±ÙˆÙ…", a:60}, {n:"Ù„Ù‚Ù…Ø§Ù†", a:34}, {n:"Ø§Ù„Ø³Ø¬Ø¯Ø©", a:30}, {n:"Ø§Ù„Ø£Ø­Ø²Ø§Ø¨", a:73}, {n:"Ø³Ø¨Ø£", a:54}, {n:"ÙØ§Ø·Ø±", a:45}, {n:"ÙŠØ³", a:83}, {n:"Ø§Ù„ØµØ§ÙØ§Øª", a:182}, {n:"Øµ", a:88}, {n:"Ø§Ù„Ø²Ù…Ø±", a:75}, {n:"ØºØ§ÙØ±", a:85}, {n:"ÙØµÙ„Øª", a:54}, {n:"Ø§Ù„Ø´ÙˆØ±Ù‰", a:53}, {n:"Ø§Ù„Ø²Ø®Ø±Ù", a:89}, {n:"Ø§Ù„Ø¯Ø®Ø§Ù†", a:59}, {n:"Ø§Ù„Ø¬Ø§Ø«ÙŠØ©", a:37}, {n:"Ø§Ù„Ø£Ø­Ù‚Ø§Ù", a:35}, {n:"Ù…Ø­Ù…Ø¯", a:38}, {n:"Ø§Ù„ÙØªØ­", a:29}, {n:"Ø§Ù„Ø­Ø¬Ø±Ø§Øª", a:18}, {n:"Ù‚", a:45}, {n:"Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", a:60}, {n:"Ø§Ù„Ø·ÙˆØ±", a:49}, {n:"Ø§Ù„Ù†Ø¬Ù…", a:62}, {n:"Ø§Ù„Ù‚Ù…Ø±", a:55}, {n:"Ø§Ù„Ø±Ø­Ù…Ù†", a:78}, {n:"Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©", a:96}, {n:"Ø§Ù„Ø­Ø¯ÙŠØ¯", a:29}, {n:"Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", a:22}, {n:"Ø§Ù„Ø­Ø´Ø±", a:24}, {n:"Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©", a:13}, {n:"Ø§Ù„ØµÙ", a:14}, {n:"Ø§Ù„Ø¬Ù…Ø¹Ø©", a:11}, {n:"Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", a:11}, {n:"Ø§Ù„ØªØºØ§Ø¨Ù†", a:18}, {n:"Ø§Ù„Ø·Ù„Ø§Ù‚", a:12}, {n:"Ø§Ù„ØªØ­Ø±ÙŠÙ…", a:12}, {n:"Ø§Ù„Ù…Ù„Ùƒ", a:30}, {n:"Ø§Ù„Ù‚Ù„Ù…", a:52}, {n:"Ø§Ù„Ø­Ø§Ù‚Ø©", a:52}, {n:"Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬", a:44}, {n:"Ù†ÙˆØ­", a:28}, {n:"Ø§Ù„Ø¬Ù†", a:28}, {n:"Ø§Ù„Ù…Ø²Ù…Ù„", a:20}, {n:"Ø§Ù„Ù…Ø¯Ø«Ø±", a:56}, {n:"Ø§Ù„Ù‚ÙŠØ§Ù…Ø©", a:40}, {n:"Ø§Ù„Ø¥Ù†Ø³Ø§Ù†", a:31}, {n:"Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", a:50}, {n:"Ø§Ù„Ù†Ø¨Ø£", a:40}, {n:"Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª", a:46}, {n:"Ø¹Ø¨Ø³", a:42}, {n:"Ø§Ù„ØªÙƒÙˆÙŠØ±", a:29}, {n:"Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±", a:19}, {n:"Ø§Ù„Ù…Ø·ÙÙÙŠÙ†", a:36}, {n:"Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚", a:25}, {n:"Ø§Ù„Ø¨Ø±ÙˆØ¬", a:22}, {n:"Ø§Ù„Ø·Ø§Ø±Ù‚", a:17}, {n:"Ø§Ù„Ø£Ø¹Ù„Ù‰", a:19}, {n:"Ø§Ù„ØºØ§Ø´ÙŠØ©", a:26}, {n:"Ø§Ù„ÙØ¬Ø±", a:30}, {n:"Ø§Ù„Ø¨Ù„Ø¯", a:20}, {n:"Ø§Ù„Ø´Ù…Ø³", a:15}, {n:"Ø§Ù„Ù„ÙŠÙ„", a:21}, {n:"Ø§Ù„Ø¶Ø­Ù‰", a:11}, {n:"Ø§Ù„Ø´Ø±Ø­", a:8}, {n:"Ø§Ù„ØªÙŠÙ†", a:8}, {n:"Ø§Ù„Ø¹Ù„Ù‚", a:19}, {n:"Ø§Ù„Ù‚Ø¯Ø±", a:5}, {n:"Ø§Ù„Ø¨ÙŠÙ†Ø©", a:8}, {n:"Ø§Ù„Ø²Ù„Ø²Ù„Ø©", a:8}, {n:"Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª", a:11}, {n:"Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©", a:11}, {n:"Ø§Ù„ØªÙƒØ§Ø«Ø±", a:8}, {n:"Ø§Ù„Ø¹ØµØ±", a:3}, {n:"Ø§Ù„Ù‡Ù…Ø²Ø©", a:9}, {n:"Ø§Ù„ÙÙŠÙ„", a:5}, {n:"Ù‚Ø±ÙŠØ´", a:4}, {n:"Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†", a:7}, {n:"Ø§Ù„ÙƒÙˆØ«Ø±", a:3}, {n:"Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†", a:6}, {n:"Ø§Ù„Ù†ØµØ±", a:3}, {n:"Ø§Ù„Ù…Ø³Ø¯", a:5}, {n:"Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", a:4}, {n:"Ø§Ù„ÙÙ„Ù‚", a:5}, {n:"Ø§Ù„Ù†Ø§Ø³", a:6}];
        let showOnlyCompleted = false;
        function render() {
            const list = document.getElementById('quran-list');
            list.innerHTML = '';
            let totalTasks = 0, doneTasks = 0, completedSurahsCounter = 0;
            surahs.forEach((s, i) => {
                let sId = i + 1;
                let itemsHTML = '';
                let sDone = 0, sTotal = 0;
                for (let j = 1; j <= s.a; j += 10) {
                    sTotal++; totalTasks++;
                    let end = Math.min(j + 9, s.a);
                    let tId = `s${sId}-a${j}-${end}`;
                    let checked = localStorage.getItem(tId) === 'true';
                    if(checked) { doneTasks++; sDone++; }
                    if (!showOnlyCompleted || (showOnlyCompleted && checked)) {
                        itemsHTML += `<div class="task-item"><input type="checkbox" id="${tId}" ${checked ? 'checked' : ''} onchange="save('${tId}', this.checked)"><label for="${tId}" class="${checked ? 'completed-text' : ''}">Ù…Ù† Ø§Ù„Ø¢ÙŠØ© ${j} Ø¥Ù„Ù‰ ${end}</label></div>`;
                    }
                }
                if (sDone === sTotal && sTotal > 0) completedSurahsCounter++;
                if (itemsHTML !== '') {
                    list.innerHTML += `<div class="surah-card"><div class="surah-header" onclick="toggle(${sId})"><span class="surah-name">${sId}. ${s.n}</span><span style="font-size:0.85em; color:var(--accent-gold); font-family: sans-serif;">${sDone}/${sTotal}</span></div><div class="btn-group"><button class="read-btn" onclick="showText(${sId})">Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³ÙˆØ±Ø© ğŸ“–</button><button class="read-btn" style="background:#8d6e63" onclick="toggle(${sId})">Ø§Ù„Ù…Ù‡Ø§Ù… âœ…</button></div><div id="quran-text-${sId}" class="quran-text-area"></div><div class="tasks-list" id="surah-${sId}">${itemsHTML}</div></div>`;
                }
            });
            updateUI(doneTasks, totalTasks, completedSurahsCounter);
        }
        function updateUI(done, total, completedSurahs) {
            const title = document.getElementById('stat-title');
            const ratio = done / total;
            if(done === 0) title.innerText = "Ø§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ Ø§Ù„Ù…Ø¨Ø§Ø±ÙƒØ© Ø§Ù„ÙŠÙˆÙ… ğŸŒ¿";
            else if(ratio < 0.5) title.innerText = `Ø£Ù†Ø¬Ø²Øª ${done} Ù…Ù‚Ø·Ø¹Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…`;
            else if(ratio >= 0.5 && ratio < 1) title.innerText = "ÙˆØµÙ„Øª Ù„Ù†ØµÙ Ø§Ù„Ø®ØªÙ…Ø©! Ø§Ø³ØªÙ…Ø± ÙˆØ«Ø§Ø¨Ø± ğŸŒŸ";
            else title.innerText = "Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„Ø®ØªÙ…! Ø¬Ø¹Ù„ Ø§Ù„Ù„Ù‡ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø´ÙÙŠØ¹Ø§Ù‹ Ù„Ùƒ ğŸ•‹";
            checkMilestones(completedSurahs);
        }
        async function showText(id) {
            const el = document.getElementById(`quran-text-${id}`);
            if(el.style.display === 'block') { el.style.display = 'none'; return; }
            el.style.display = 'block';
            el.innerHTML = "<p style='font-size:0.75em;'>Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¢ÙŠØ§Øª...</p>";
            try {
                const res = await fetch(`https://api.alquran.cloud/v1/surah/${id}`);
                const data = await res.json();
                let ayahs = data.data.ayahs;
                let bismillah = "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù";
                if (ayahs[0].text.includes(bismillah)) {
                    ayahs[0].text = ayahs[0].text.replace(bismillah, "").trim();
                }
                let bismillahHeader = (id !== 9 && id !== 1) ? `<div class="bismillah-frame"> ${bismillah} </div><br>` : "";
                let ayatsContent = ayahs.map(a => `<span>${a.text} <span style="color:var(--accent-gold); font-size: 0.75em;">ï´¿${a.numberInSurah}ï´¾</span></span>`).join(' ');
                el.innerHTML = bismillahHeader + ayatsContent;
            } catch { el.innerText = "ØªØ­ØªØ§Ø¬ Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†Øµ."; }
        }
        function checkMilestones(count) {
            const msgs = { 1: "Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØºÙŠØ« Ù‚Ø·Ø±Ø©.. Ù…Ø¨Ø§Ø±Ùƒ Ù„Ùƒ Ø£ÙˆÙ„ Ø³ÙˆØ±Ø©!", 10: "Ø¹Ø´Ø± Ø³ÙˆØ±! Ø£Ù†Øª Ø§Ù„Ø¢Ù† ØªØ«Ø¨Øª Ù„Ù†ÙØ³Ùƒ Ø£Ù†Ùƒ Ù‚Ø§Ø¯Ø±..", 60: "ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ù†ØµÙ! Ø§Ù„Ù„Ù‡ ÙŠØµØ·ÙÙŠ Ù…Ù† Ø¹Ø¨Ø§Ø¯Ù‡ Ù…Ù† ÙŠØ­ÙØ¸ ÙƒØªØ§Ø¨Ù‡.", 114: "Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±! Ø®ØªÙ…Øª ÙƒØªØ§Ø¨ Ø§Ù„Ù„Ù‡.." };
            if (msgs[count] && !sessionStorage.getItem('m_' + count)) {
                alert("âœ¨ Ø±Ø³Ø§Ù„Ø© ØªØ´Ø¬ÙŠØ¹ÙŠØ©:\n\n" + msgs[count]);
                sessionStorage.setItem('m_' + count, 'true');
            }
        }
        function toggle(id) {
            const el = document.getElementById(`surah-${id}`);
            const visible = el.style.display === 'block';
            document.querySelectorAll('.tasks-list').forEach(l => l.style.display = 'none');
            el.style.display = visible ? 'none' : 'block';
        }
        function toggleFilter() { showOnlyCompleted = !showOnlyCompleted; render(); }
        function save(id, val) { localStorage.setItem(id, val); render(); }
        render();
    </script>
</body>
</html>
